The files needed to make everything work (Ubuntu host rename & AD join) are:

- rename_host_fog (Controls everything, located on FOG server in /images/postdownloadscripts/. This file automatically copies ad_join.sh and crontab onto imaged computer. This file runs right after the image files are copied to the computer(s) by FOG. To enable/disable, edit /images/postdownloadscripts/fog.postdownload and either comment (#) or uncomment the line ". ${postdownpath}rename_host_fog")

- crontab (Overwrites the original crontab at /etc/crontab. Sets ad_join.sh to automatically run after reboot, which is the first boot after being imaged). In the future I may change this to just writing (>>) to the end of crontab instead of overwriting the full file. If your crontab does have other settings you can just add the one line (@reboot root /opt/scripts/ad_join.sh>>/opt/scripts/ad.log) to your own crontab and use that. Crontab doesn't *have* to be copied by FOG and could be on the PC already, but you must make sure not to reboot any after setting the @reboot line or else it'll complete before imaging. The safer option is to let fog copy the crontab.

- ad_join.sh (Leaves realm, joins realm, restarts ssd, & reboots. Upon reboot AD login will work.) Make sure to update with your own settings (eg: echo 'PasswordHere' | realm join -vvv -U UserHere Domain.HERE). Also, make sure you create a correct sssd.conf.bak on the PC providing the image prior to capturing the image, which has all the settings for the Domain. Anytime you leave a realm, sssd.conf is over-written as new and you lose the settings, thus we use a sssd.conf.bak file. 

- Custom_My_Master (To be ran on the Ubuntu install prior to being imaged. Purpose is to prep the Ubuntu installation for imaging (& AD use). Functions include Host Update (apt-get update/upgrade), Grub Configuration, Gnome authentication, & Enabling Fog service. Does *not* have to be ran but can automate the above tasks at once.

At current, partition selection is NOT automatic. The script (rename_host_fog) has to manually be edited (Lines 95, 96: mount /dev/x /imagefs) with the correct partition that YOUR Ubuntu is on (/dev/sda5, /dev/nvme0n1p5, etc). It is my hope to add intelligence in the script to automatically detect which partition is Ubuntu (by looking for a /etc or /opt folder).